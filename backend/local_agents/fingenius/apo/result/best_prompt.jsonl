{"template": "根据当前状态，判断哪些流程已经执行完毕，直接执行下一个流程。如果流程前面已经执行过，不要重复执行。\n\n**工作流程规则**：\n1. **数据收集阶段**：  \n   - 允许使用 `数据收集工具`，**禁用其他所有工具**（包括 `terminate`）。  \n   - 指令示例：  \n     > \"当前仅允许使用数据收集工具，禁止调用任何其他工具。输出格式：`[数据收集结果]`\"\n\n2. **深度分析阶段**：  \n   - **禁用所有工具**（包括 `terminate`），仅允许生成分析文本。  \n   - 指令示例：  \n     > \"当前处于深度分析阶段，禁止调用任何工具。请基于数据生成专业分析报告，不要解释思考过程。\"\n\n3. **综合结论阶段**：  \n   - 允许调用 `terminate` 结束任务。  \n   - 指令示例：  \n     > \"分析完成后，调用 `terminate` 工具提交最终结论。\"\n     \n{{ if 输出包含 \"terminate\" 且 当前阶段 != \"综合结论\" }}  \n  ❗ 违规操作！深度分析阶段禁止调用工具！请重新生成纯文本分析报告。  \n{{ end }}\n\n重要提示：如果状态中已经含有收集的数据，不要重复收集，进入下一个流程！\n\n"}
{"template": "根据当前状态，判断哪些流程已经执行完毕，直接执行下一个流程。如果流程前面已经执行过，不要重复执行。\n\n**工作流程规则**：\n1. **数据收集阶段**：  \n   - 允许使用 `数据收集工具`，**禁用其他所有工具**（包括 `terminate`）。  \n   - 指令示例：  \n     > \"当前仅允许使用数据收集工具，禁止调用任何其他工具。输出格式：`[数据收集结果]`\"\n\n2. **深度分析阶段**：  \n   - **禁用所有工具**（包括 `terminate`），仅允许生成分析文本。  \n   - 指令示例：  \n     > \"当前处于深度分析阶段，禁止调用任何工具。请基于数据生成专业分析报告，不要解释思考过程。\"\n\n3. **综合结论阶段**：  \n   - 允许调用 `terminate` 结束任务。  \n   - 指令示例：  \n     > \"分析完成后，调用 `terminate` 工具提交最终结论。\"\n     \n{{ if 输出包含 \"terminate\" 且 当前阶段 != \"综合结论\" }}  \n  ❗ 违规操作！深度分析阶段禁止调用工具！请重新生成纯文本分析报告。  \n{{ end }}\n\n重要提示：如果状态中已经含有收集的数据，不要重复收集，进入下一个流程！\n\n"}
{"template": "根据当前状态，判断哪些流程已经执行完毕，直接执行下一个流程。如果流程前面已经执行过，不要重复执行。\n\n**工作流程与状态规则**：\n- **状态定义**：系统当前阶段由 `{{stage}}` 变量明确标识，可能值为 `数据收集`、`深度分析`、`综合结论`。\n- **阶段切换条件**：\n  - 当 `{{stage}}` 为 `数据收集` 且已有 `{{collected_data}}` 时，自动进入 `深度分析` 阶段。\n  - 当 `{{stage}}` 为 `深度分析` 且分析文本已生成时，自动进入 `综合结论` 阶段。\n- **禁止重复执行**：若某阶段对应产出（数据或分析）已存在，则直接进入下一阶段，不得重新执行。\n\n**各阶段执行机制**：\n\n1. **数据收集阶段**（`{{stage}} = \"数据收集\"`）：\n   - **允许工具**：仅可使用 `数据收集工具`。\n   - **禁止工具**：所有其他工具（包括 `terminate`）。\n   - **输出格式**：必须返回 `[数据收集结果]`，内容为收集到的数据。\n   - **前置检查**：若 `{{collected_data}}` 已存在，则跳过本阶段，直接进入深度分析。\n\n2. **深度分析阶段**（`{{stage}} = \"深度分析\"`）：\n   - **允许输出**：仅可生成分析文本。\n   - **禁止工具**：禁止调用任何工具（包括 `terminate`）。\n   - **输出格式**：生成专业分析报告，不解释思考过程。\n   - **前置检查**：若 `{{analysis_text}}` 已存在，则跳过本阶段，直接进入综合结论。\n\n3. **综合结论阶段**（`{{stage}} = \"综合结论\"`）：\n   - **允许工具**：仅可调用 `terminate` 以提交最终结论。\n   - **输出格式**：调用 `terminate` 并附带最终结论内容。\n\n**违规防范机制**：\n- 在 `数据收集` 阶段，若输出包含非数据收集工具调用，则重新生成 `[数据收集结果]`。\n- 在 `深度分析` 阶段，若输出包含任何工具调用，则重新生成纯文本分析报告。\n- 在 `综合结论` 阶段，若未调用 `terminate`，则重新生成包含 `terminate` 调用的输出。"}
