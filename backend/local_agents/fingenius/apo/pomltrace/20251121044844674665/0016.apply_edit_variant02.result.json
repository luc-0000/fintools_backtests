{
  "messages": [
    {
      "speaker": "system",
      "content": "Revise the prompt to address ONE critique point clearly and effectively. Preserve all variable names in curly-brackets.\n\nDo not address more than one critique point. Focus on the single most critical issue.\n\nKeep the new prompt close in tone, length, and structure to the original.\n\n# Output Format\n\nReturn only the revised full prompt. Do not include explanations, comparisons, or other text."
    },
    {
      "speaker": "human",
      "content": "### PROMPT\n\næ ¹æ®å½“å‰çŠ¶æ€ `{{current_stage}}` å’Œå·²æ”¶é›†æ•°æ® `{{collected_data}}`ï¼Œåˆ¤æ–­å“ªäº›æµç¨‹å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œç›´æ¥æ‰§è¡Œä¸‹ä¸€ä¸ªæµç¨‹ã€‚å¦‚æœæµç¨‹å‰é¢å·²ç»æ‰§è¡Œè¿‡ï¼Œä¸è¦é‡å¤æ‰§è¡Œã€‚\n\n**å·¥ä½œæµç¨‹è§„åˆ™**ï¼š\n\n1. **æ•°æ®æ”¶é›†é˜¶æ®µ**ï¼š  \n   - å…è®¸ä½¿ç”¨ `æ•°æ®æ”¶é›†å·¥å…·`ï¼Œ**ç¦ç”¨å…¶ä»–æ‰€æœ‰å·¥å…·**ï¼ˆåŒ…æ‹¬ `terminate`ï¼‰ã€‚  \n   - æ•°æ®æ”¶é›†å®Œæˆæ¡ä»¶ï¼šå½“ `{{collected_data}}` é•¿åº¦è¶…è¿‡ 200 å­—ç¬¦æ—¶ï¼Œè‡ªåŠ¨è¿›å…¥æ·±åº¦åˆ†æé˜¶æ®µã€‚  \n   - è¾“å‡ºæ ¼å¼ï¼š`[æ•°æ®æ”¶é›†ç»“æœ] {{collected_data}} [DATA_COLLECTION_END]`  \n   - å¦‚æœå°è¯•è°ƒç”¨ç¦ç”¨å·¥å…·ï¼Œè¿”å›é”™è¯¯ï¼š`âŒ æ•°æ®æ”¶é›†é˜¶æ®µç¦æ­¢è°ƒç”¨ {{tool_name}}ï¼è¯·ä»…ä½¿ç”¨æ•°æ®æ”¶é›†å·¥å…·ã€‚`\n\n2. **æ·±åº¦åˆ†æé˜¶æ®µ**ï¼š  \n   - **ç¦ç”¨æ‰€æœ‰å·¥å…·**ï¼ˆåŒ…æ‹¬ `terminate`ï¼‰ï¼Œä»…å…è®¸ç”Ÿæˆåˆ†ææ–‡æœ¬ã€‚  \n   - è¿›å…¥æ¡ä»¶ï¼š`{{collected_data}}` é•¿åº¦ â‰¥ 200 å­—ç¬¦ã€‚  \n   - è¾“å‡ºæ ¼å¼ï¼š`[æ·±åº¦åˆ†ææŠ¥å‘Š] {{analysis_content}} [ANALYSIS_END]`  \n   - å¦‚æœå°è¯•è°ƒç”¨ä»»ä½•å·¥å…·ï¼Œè¿”å›é”™è¯¯ï¼š`âŒ æ·±åº¦åˆ†æé˜¶æ®µç¦æ­¢è°ƒç”¨ä»»ä½•å·¥å…·ï¼è¯·ç”Ÿæˆçº¯æ–‡æœ¬åˆ†ææŠ¥å‘Šã€‚`  \n   - åˆ†æå®Œæˆåï¼Œè‡ªåŠ¨è¿›å…¥ç»¼åˆç»“è®ºé˜¶æ®µã€‚\n\n3. **ç»¼åˆç»“è®ºé˜¶æ®µ**ï¼š  \n   - å…è®¸è°ƒç”¨ `terminate` ç»“æŸä»»åŠ¡ã€‚  \n   - è¿›å…¥æ¡ä»¶ï¼šæ·±åº¦åˆ†æé˜¶æ®µå·²å®Œæˆï¼ˆè¾“å‡ºåŒ…å« `[ANALYSIS_END]`ï¼‰ã€‚  \n   - ç»ˆæ­¢æ¡ä»¶ï¼šæœ€ç»ˆç»“è®ºå¿…é¡»åŒ…å«è‡³å°‘ 3 ä¸ªå…³é”®å‘ç°å’Œ 1 æ¡å»ºè®®ã€‚  \n   - è¾“å‡ºæ ¼å¼ï¼šè°ƒç”¨ `terminate` å¹¶æäº¤ `[æœ€ç»ˆç»“è®º] {{final_conclusion}}`  \n   - å¦‚æœæœªæ»¡è¶³ç»ˆæ­¢æ¡ä»¶ï¼Œè¿”å›é”™è¯¯ï¼š`âŒ ç»“è®ºå¿…é¡»åŒ…å«è‡³å°‘ 3 ä¸ªå…³é”®å‘ç°å’Œ 1 æ¡å»ºè®®æ‰èƒ½ç»“æŸä»»åŠ¡ã€‚`\n\n**æ•°æ®éªŒè¯ä¸é˜¶æ®µè¿‡æ¸¡**ï¼š  \n- å¦‚æœ `{{collected_data}}` å­˜åœ¨ä½†é•¿åº¦ < 200 å­—ç¬¦ï¼Œæç¤ºï¼š`âš ï¸ æ•°æ®ä¸å®Œæ•´ï¼Œè¯·ç»§ç»­æ”¶é›†æ•°æ®è‡³ 200 å­—ç¬¦ä»¥ä¸Šã€‚`  \n- æ¯ä¸ªé˜¶æ®µç»“æŸæ—¶å¿…é¡»è¾“å‡ºå¯¹åº”çš„ç»“æŸæ ‡è®°ï¼ˆ`[DATA_COLLECTION_END]` / `[ANALYSIS_END]`ï¼‰ä»¥æ˜ç¡®é˜¶æ®µå®Œæˆã€‚  \n- é˜¶æ®µè¿‡æ¸¡å‰éœ€ç¡®è®¤ï¼š`ç¡®è®¤{{current_stage}}é˜¶æ®µå·²å®Œæˆï¼Ÿ[YES/NO]`ï¼Œä»…å½“å›ç­”ä¸º YES æ—¶è¿›å…¥ä¸‹ä¸€é˜¶æ®µã€‚\n\n**é”™è¯¯æ¢å¤ä¸å›æ»š**ï¼š  \n- å¦‚æœæ£€æµ‹åˆ°é˜¶æ®µè¢«é”™è¯¯è·³è¿‡ï¼Œæ‰§è¡Œå›æ»šï¼šè¾“å‡º `ğŸ”„ æ£€æµ‹åˆ°é˜¶æ®µå¼‚å¸¸ï¼Œå›æ»šè‡³ {{correct_stage}} é˜¶æ®µã€‚` å¹¶é‡ç½® `{{current_stage}}`ã€‚  \n- ç¦æ­¢åœ¨éç»¼åˆç»“è®ºé˜¶æ®µè°ƒç”¨ `terminate`ï¼Œå¦åˆ™è¿”å›ï¼š`âŒ è¿è§„æ“ä½œï¼{{current_stage}} é˜¶æ®µç¦æ­¢è°ƒç”¨ terminateï¼è¯·é‡æ–°ç”Ÿæˆçº¯æ–‡æœ¬è¾“å‡ºã€‚`\n\n### CRITIQUE\n\nBased on the provided experiments, here are specific critiques and testable improvements for the prompt template:\n\n- **Add explicit tool definitions**: The prompt mentions \"æ•°æ®æ”¶é›†å·¥å…·\" but doesn't define what specific tools are available. Add a clear list: `å¯ç”¨å·¥å…·: [tool1, tool2, ...]` to eliminate ambiguity.\n\n- **Clarify stage transition triggers**: The current template has conflicting transition logic - both automatic (\"è‡ªåŠ¨è¿›å…¥\") and confirmation-based (\"ç¡®è®¤é˜¶æ®µå·²å®Œæˆ\"). Standardize to one method, preferably automatic based on output markers.\n\n- **Simplify confirmation workflow**: Remove the manual confirmation step \"ç¡®è®¤{{current_stage}}é˜¶æ®µå·²å®Œæˆï¼Ÿ[YES/NO]\" as it introduces unnecessary complexity. Rely solely on the end markers for stage progression.\n\n- **Define concrete data collection tools**: Replace generic \"æ•°æ®æ”¶é›†å·¥å…·\" with specific tool names like `web_search`, `database_query`, or `file_reader` to make the constraints actionable.\n\n- **Add character counting mechanism**: Include explicit counting logic: `å½“å‰æ•°æ®é•¿åº¦: {{collected_data|length}}/200å­—ç¬¦` to provide clear progress tracking.\n\n- **Standardize error message formats**: Create consistent error templates with clear recovery instructions rather than generic prohibitions.\n\n- **Remove redundant validation checks**: Eliminate the \"å¦‚æœæµç¨‹å‰é¢å·²ç»æ‰§è¡Œè¿‡\" check since the stage-based system inherently prevents re-execution.\n\n- **Add explicit output examples**: Provide concrete examples of valid outputs for each stage to guide the model's formatting decisions."
    }
  ]
}