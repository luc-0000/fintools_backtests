{
  "messages": [
    {
      "speaker": "system",
      "content": "Revise the prompt to address ONE critique point clearly and effectively. Preserve all variable names in curly-brackets.\n\nDo not address more than one critique point. Focus on the single most critical issue.\n\nKeep the new prompt close in tone, length, and structure to the original.\n\n# Output Format\n\nReturn only the revised full prompt. Do not include explanations, comparisons, or other text."
    },
    {
      "speaker": "human",
      "content": "### PROMPT\n\næ ¹æ®å½“å‰çŠ¶æ€ `{{current_stage}}` å’Œå·²æ”¶é›†æ•°æ® `{{collected_data}}`ï¼Œåˆ¤æ–­å“ªäº›æµç¨‹å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œç›´æ¥æ‰§è¡Œä¸‹ä¸€ä¸ªæµç¨‹ã€‚å¦‚æœæµç¨‹å‰é¢å·²ç»æ‰§è¡Œè¿‡ï¼Œä¸è¦é‡å¤æ‰§è¡Œã€‚\n\n**å·¥ä½œæµç¨‹è§„åˆ™**ï¼š\n\n1. **æ•°æ®æ”¶é›†é˜¶æ®µ**ï¼š  \n   - å…è®¸ä½¿ç”¨ `æ•°æ®æ”¶é›†å·¥å…·`ï¼Œ**ç¦ç”¨å…¶ä»–æ‰€æœ‰å·¥å…·**ï¼ˆåŒ…æ‹¬ `terminate`ï¼‰ã€‚  \n   - æ•°æ®æ”¶é›†å®Œæˆæ¡ä»¶ï¼šå½“ `{{collected_data}}` é•¿åº¦è¶…è¿‡ 200 å­—ç¬¦æ—¶ï¼Œè‡ªåŠ¨è¿›å…¥æ·±åº¦åˆ†æé˜¶æ®µã€‚  \n   - è¾“å‡ºæ ¼å¼ï¼š`[æ•°æ®æ”¶é›†ç»“æœ] {{collected_data}} [DATA_COLLECTION_END]`  \n   - å¦‚æœå°è¯•è°ƒç”¨ç¦ç”¨å·¥å…·ï¼Œè¿”å›é”™è¯¯ï¼š`âŒ æ•°æ®æ”¶é›†é˜¶æ®µç¦æ­¢è°ƒç”¨ {{tool_name}}ï¼è¯·ä»…ä½¿ç”¨æ•°æ®æ”¶é›†å·¥å…·ã€‚`\n\n2. **æ·±åº¦åˆ†æé˜¶æ®µ**ï¼š  \n   - **ç¦ç”¨æ‰€æœ‰å·¥å…·**ï¼ˆåŒ…æ‹¬ `terminate`ï¼‰ï¼Œä»…å…è®¸ç”Ÿæˆåˆ†ææ–‡æœ¬ã€‚  \n   - è¿›å…¥æ¡ä»¶ï¼š`{{collected_data}}` é•¿åº¦ â‰¥ 200 å­—ç¬¦ã€‚  \n   - è¾“å‡ºæ ¼å¼ï¼š`[æ·±åº¦åˆ†ææŠ¥å‘Š] {{analysis_content}} [ANALYSIS_END]`  \n   - å¦‚æœå°è¯•è°ƒç”¨ä»»ä½•å·¥å…·ï¼Œè¿”å›é”™è¯¯ï¼š`âŒ æ·±åº¦åˆ†æé˜¶æ®µç¦æ­¢è°ƒç”¨ä»»ä½•å·¥å…·ï¼è¯·ç”Ÿæˆçº¯æ–‡æœ¬åˆ†ææŠ¥å‘Šã€‚`  \n   - åˆ†æå®Œæˆåï¼Œè‡ªåŠ¨è¿›å…¥ç»¼åˆç»“è®ºé˜¶æ®µã€‚\n\n3. **ç»¼åˆç»“è®ºé˜¶æ®µ**ï¼š  \n   - å…è®¸è°ƒç”¨ `terminate` ç»“æŸä»»åŠ¡ã€‚  \n   - è¿›å…¥æ¡ä»¶ï¼šæ·±åº¦åˆ†æé˜¶æ®µå·²å®Œæˆï¼ˆè¾“å‡ºåŒ…å« `[ANALYSIS_END]`ï¼‰ã€‚  \n   - ç»ˆæ­¢æ¡ä»¶ï¼šæœ€ç»ˆç»“è®ºå¿…é¡»åŒ…å«è‡³å°‘ 3 ä¸ªå…³é”®å‘ç°å’Œ 1 æ¡å»ºè®®ã€‚  \n   - è¾“å‡ºæ ¼å¼ï¼šè°ƒç”¨ `terminate` å¹¶æäº¤ `[æœ€ç»ˆç»“è®º] {{final_conclusion}}`  \n   - å¦‚æœæœªæ»¡è¶³ç»ˆæ­¢æ¡ä»¶ï¼Œè¿”å›é”™è¯¯ï¼š`âŒ ç»“è®ºå¿…é¡»åŒ…å«è‡³å°‘ 3 ä¸ªå…³é”®å‘ç°å’Œ 1 æ¡å»ºè®®æ‰èƒ½ç»“æŸä»»åŠ¡ã€‚`\n\n**æ•°æ®éªŒè¯ä¸é˜¶æ®µè¿‡æ¸¡**ï¼š  \n- å¦‚æœ `{{collected_data}}` å­˜åœ¨ä½†é•¿åº¦ < 200 å­—ç¬¦ï¼Œæç¤ºï¼š`âš ï¸ æ•°æ®ä¸å®Œæ•´ï¼Œè¯·ç»§ç»­æ”¶é›†æ•°æ®è‡³ 200 å­—ç¬¦ä»¥ä¸Šã€‚`  \n- æ¯ä¸ªé˜¶æ®µç»“æŸæ—¶å¿…é¡»è¾“å‡ºå¯¹åº”çš„ç»“æŸæ ‡è®°ï¼ˆ`[DATA_COLLECTION_END]` / `[ANALYSIS_END]`ï¼‰ä»¥æ˜ç¡®é˜¶æ®µå®Œæˆã€‚  \n- é˜¶æ®µè¿‡æ¸¡å‰éœ€ç¡®è®¤ï¼š`ç¡®è®¤{{current_stage}}é˜¶æ®µå·²å®Œæˆï¼Ÿ[YES/NO]`ï¼Œä»…å½“å›ç­”ä¸º YES æ—¶è¿›å…¥ä¸‹ä¸€é˜¶æ®µã€‚\n\n**é”™è¯¯æ¢å¤ä¸å›æ»š**ï¼š  \n- å¦‚æœæ£€æµ‹åˆ°é˜¶æ®µè¢«é”™è¯¯è·³è¿‡ï¼Œæ‰§è¡Œå›æ»šï¼šè¾“å‡º `ğŸ”„ æ£€æµ‹åˆ°é˜¶æ®µå¼‚å¸¸ï¼Œå›æ»šè‡³ {{correct_stage}} é˜¶æ®µã€‚` å¹¶é‡ç½® `{{current_stage}}`ã€‚  \n- ç¦æ­¢åœ¨éç»¼åˆç»“è®ºé˜¶æ®µè°ƒç”¨ `terminate`ï¼Œå¦åˆ™è¿”å›ï¼š`âŒ è¿è§„æ“ä½œï¼{{current_stage}} é˜¶æ®µç¦æ­¢è°ƒç”¨ terminateï¼è¯·é‡æ–°ç”Ÿæˆçº¯æ–‡æœ¬è¾“å‡ºã€‚`\n\n### CRITIQUE\n\n**Critique:**\n\n*   **Ambiguous Stage Transition Logic:** The prompt requires manual confirmation (\"ç¡®è®¤{{current_stage}}é˜¶æ®µå·²å®Œæˆï¼Ÿ[YES/NO]\") but also defines automatic triggers (e.g., data length â‰¥ 200). This creates a conflict, causing the agent to hesitate and fail to progress automatically as intended.\n*   **Vague Tool Specification:** The instruction to \"use data collection tool\" is too generic. Without a specific, named tool (e.g., `get_user_data`), the agent lacks a clear action to execute, leading to inaction or incorrect tool calls.\n*   **Conflicting Output Instructions:** The prompt mandates a specific output format for each stage, but the core instruction is to \"directly execute the next process.\" This contradiction confuses the agent about whether to *describe* an action or *perform* it.\n*   **Missing Initial State Definition:** The prompt does not specify the starting `{{current_stage}}` or initial `{{collected_data}}`. This leaves the agent without a clear starting point, causing inconsistent behavior across runs."
    }
  ]
}